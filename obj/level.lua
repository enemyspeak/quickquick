local Level = class('Level')

Level.static.WIDTH = IRESX
Level.static.HEIGHT = IRESY
Level.static.CENTERX = Level.WIDTH/2
Level.static.CENTERY = Level.HEIGHT/2
Level.static.justabit = 0.001
Level.static.COLOR0 = {0,34,55}
Level.static.COLOR1 = {0,45,62}
Level.static.COLOR2 = {0,66,88}

Level.static.template = {holes = {{1,1}},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}}
						}
Level.static.level0 =	{holes = {},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}}
						}


Level.static.level1 = 	{holes = {{100,-11}, {-79,60},{-200,100},{10,-102}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,1},
						{1,1,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1}}
						}
Level.static.level2 = 	{holes = {{0,-10},{-125,170},{-34,-95}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1}}
						}
Level.static.level3 = 	{holes = {{-154,-92},{160,-117},{-130,122},{96,152}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1},
						{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1},
						{1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1},
						{1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1},
						{1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1},
						{1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,0,1},
						{1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,1},
						{1,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,1},
						{1,0,0,0,1,0,0,1,0,0,0,0,1,1,1,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1}}
						}
Level.static.level4 = 	{holes = {{-155,100},{-34,-95}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1},
						{1,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1},
						{1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,1},
						{1,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1},
						{1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1},
						{1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1}}
						}	
Level.static.level5 = 	{holes = {{-100,-10},{-125,170},{-170,50},{213,39}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1}}
						}				
Level.static.level6 =	{holes = {{1,1},{8,8},{100,70},{-200,-80},{200,170},{0,180}},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}}
						}
Level.static.level7 =	{holes = {{-190,130},{-93,-67},{112,124},{126,139}},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,1,0,0,1},
						{1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1},
						{1,0,0,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1},
						{1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,1},
						{1,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1}}
						}
Level.static.level8 =	{holes = {{77,35},{-172,65},{108,-43},{15,141}},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},
						{1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}}
						}
Level.static.level9 =	{holes = {{205,78},{-200,-80},{117,-69}},	-- these coordinates are from a center of (0,0)
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1},
						{1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1}}
						}
Level.static.level10 = 	{holes = {{205,78},{-200,-180},{117,-69}},
						grid = {
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1},
						{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
						{1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1}}
						}





function Level:initialize( attributes )
	local attributes = attributes or {}
	self.x = attributes.x or 0
	self.y = attributes.y or 0
	self.width = attributes.w or 20
	self.height = attributes.h or 20
	local temp = 24	-- tile size
	self.gridw = temp --10
	self.gridh = temp --10
	self.levelNumber = attributes.levelNumber or 0
	
	if self.levelNumber == 0 then 
		self.grid = attributes.grid or Level.level0.grid 
		self.holes = attributes.holes or Level.level0.holes
	elseif self.levelNumber == 1 then 
		self.grid = Level.level1.grid 
		self.holes = Level.level1.holes
	elseif self.levelNumber == 2 then 
		self.grid = Level.level2.grid
		self.holes = Level.level2.holes
	elseif self.levelNumber == 3 then 
		self.grid = Level.level3.grid
		self.holes = Level.level3.holes	
	elseif self.levelNumber == 4 then 
		self.grid = Level.level4.grid
		self.holes = Level.level4.holes	
	elseif self.levelNumber == 5 then 
		self.grid = Level.level5.grid
		self.holes = Level.level5.holes	
	elseif self.levelNumber == 6 then 
		self.grid = Level.level6.grid
		self.holes = Level.level6.holes	
	elseif self.levelNumber == 7 then 
		self.grid = Level.level7.grid
		self.holes = Level.level7.holes	
	elseif self.levelNumber == 8 then 
		self.grid = Level.level8.grid
		self.holes = Level.level8.holes	
	elseif self.levelNumber == 9 then 
		self.grid = Level.level9.grid
		self.holes = Level.level9.holes			
	elseif self.levelNumber == 10 then 
		self.grid = Level.level10.grid
		self.holes = Level.level10.holes			
	end
end

function Level:check(x, y, w, h, func)
	local x1, y1, x2, y2, i, j
	-- find region coordinates to check in:
	x1 = math.floor(x / self.gridw)
	y1 = math.floor(y / self.gridh)
	x2 = math.floor((x + w - Level.justabit) / self.gridw)
	y2 = math.floor((y + h - Level.justabit) / self.gridh)
	for j = y1, y2 do for i = x1, x2 do
		local d = self.grid[j] -- find row
		if (d ~= nil) then
			d = d[i] -- find cell
			if d == 1 then
			--if (func(d)) then return true end -- test cell
				return true
			end
		end
	end end
	return false
end

function Level:getGridw()
	return self.gridw
end

function Level:getGridh()
	return self.gridh
end

function Level:getYSize()
	return #self.grid
end

function Level:getHoles()
	local temp = {}
	for i,v in ipairs(self.holes) do
		table.insert(temp, self.holes[i])
	end
	return temp
end

function Level:update(dt)

end

function Level:setPos(value1,value2)
	self.x = value1
	self.y = value2
end

function Level:draw()
	love.graphics.setColor(Level.COLOR0)	
	local insetX = -Level.CENTERX + self.x
	local insetY = -Level.CENTERY + self.y
	for j=0, #self.grid do for i=0,#self.grid[1] do
		local d = self.grid[j] -- find row

		if (d ~= nil) then
			if d[i] == 1 then
				love.graphics.rectangle("fill",insetX+self.gridw*i-self.gridw,insetY+self.gridh*j-self.gridh,self.gridw,self.gridh)
			end
		end
	end end


end


return Level

